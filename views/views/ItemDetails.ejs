<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../public/css/main.css">
    <link rel="stylesheet" type="text/css" href="../public/css/navbar.css">
    <link rel="stylesheet" type="text/css" href="../public/css/shop.css">
    <link rel="stylesheet" type="text/css" href="../public/css/itemDetails.css">
    <link rel="stylesheet" href="../public/css/animate.css">
    <link rel="stylesheet" href="../public/css/component.css">
    <link rel="stylesheet" type="text/css" href="../public/css/breadcrumb.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
</head>
<style type="text/css">
body {
    background-color: rgba(0, 0, 0, 1);
    width: 100%;
    height: 100%;
}

item-detail {
    border: 1px;
    border-color: black;
    margin: 20px;
    margin-top: 0px;
}

.photo >img {
    width: 100%;
}
.footer li{
    color: #333;
}

/*div[class*='col-'] hr{
    border-top: dotted;
}*/

#phasebeam {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}

#phasebeam canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.introduction .label {
    background-color: #5CB85C;
}

.crumbs ul {
    list-style-type: none;
}
#nav li {
    padding-top:0;
}
</style>

<body>
    <!-- NavBar -->
    <div id="nav-wrapper">
        <div id="nav" class="navbar navbar-inverse navbar-static-top navbar" role="navigation">
            <div class="container">
                <div class="row">
                    <div>
                        <img id = "_avatar" class="logo">
                    </div>
                    <div class='site-name hidden-xs'>
                        <app-showName></app-showName>
                    </div>
                    <div class='navbar-left site-name phone'>
                        <i class="fa fa-phone "></i>
                    </div>
                    <div class="navbar-header">
                        <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                    </div>
                    <nav class="collapse navbar-collapse " role="navigation">
                        <ul class="nav navbar-nav ">
                            <li class='navbar-right'>
                                <a href="#sec">About</a>
                            </li>
                            <li class='navbar-right'>
                                <a href="#sec">Khuyến mãi</a>
                            </li>
                            <li class='navbar-right'>
                                <a href="#sec">Sản phẩm</a>
                            </li>
                            <li class='navbar-right'>
                                <a href="#sec">Home</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <!--  -->
    <section class="divider" style="position: relative">
        <div class="container-fluid">
            <!-- Breadcrumb stay here -->
            <div class="col-md-10 col-lg-10 col-md-offset-1 col-lg-offset-1" style="bottom: 0; position: absolute; padding:0">
                <div class="crumbs">
                    <ul>
                        <li><a href="#1"><i class="fa fa-home"></i> Home</a></li>
                        <li><a href="#2" class="two"><i class="fa fa-user-plus"></i> Keyword</a></li>
                        <li><a href="#3" class="three">Item</a></li>
                        <!--                         <li><a href="#4" class="four">Four</a></li>
                        <li><a href="#5" class="five">Five</a></li> -->
                    </ul>
                </div>
                <!-- /Breadcrumb -->
            </div>
    </section>
    <div class="container-fluid" id="start-offset" style="padding:0">
        <div class="col-md-10 col-lg-10 col-md-offset-1 col-lg-offset-1">
            <hr>
            <div style="background-color:rgba(0,0,0,0.6); padding:15px" class="clearfix animated bounceInLeft" id="cover">
                <!-- Product Images -->
                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" style="padding:0">
                    <div>
                        <img class="img-responsive" style="margin-left:auto; height: 400px;" id = "DisplayImg">
                    </div>
                    <div style="position:absolute;top:0;width:20%" class="clearfix">
                        <div>
                            <img class="img-responsive center-block" style="padding-bottom:1px" id = "img_0" app-role = "complementImage">
                        </div>
                        <div>
                            <img class="img-responsive center-block" style="padding-bottom:1px" id = "img_1" app-role = "complementImage">
                        </div>
                        <div>
                            <img class="img-responsive center-block" style="padding-bottom:1px" id = "img_2" app-role = "complementImage">
                        </div>
                    </div>
                </div>
                <!-- Product Description -->
                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" style="color:white">
                    <li class="heading">
                        <app-productName></app-productName> 
                    </li>
                    <li>
                        <!-- <div class="rating"> -->
                        <span>☆</span>
                        <span>☆</span>
                        <span>☆</span>
                        <span>☆</span>
                        <span>☆</span>
                        <!-- </div> -->
                    </li>
                    <li>
                        <label>Brand</label>
                        <app-brandName></app-brandName>
                    </li>
                    <li>
                        <label>Country of Origin</label>
                        <app-country></app-country>
                    </li>
                    <li>
                        <label>Product ID</label>
                        <app-ProductId></app-ProductId>
                    </li>
                    <li>
                        <label>Tags</label>
                        <app-Tags></app-Tags>
                    </li>
                    <li>
                        <label>Description</label>
                        <app-productDescription></app-productDescription>
                    </li>
                    <li>
                        <label>Price</label>
                        <span style="text-decoration: line-through; color:red"><app-oldPrice></app-oldPrice></span>
                        <span><app-newPrice></app-newPrice></span>
                    </li>
                </div>
            </div>
            <hr>
        </div>
    </div>
    </div>
    <!-- <section class="divider"></section> -->
    <div class="container-fluid" style="padding:0">
        <div class="col-sm-10 col-sm-offset-1">
            <div class="panel panel-default ">
                <div class="panel-heading">
                    Sản phẩm tương tự
                </div>
                <div class="panel-body" id = "similarPanel">
                </div>
            </div>
            <!--/col-->
            <hr>
        </div>
    </div>
    <section class="divider">
        <div class="col-md-10 col-lg-10 col-md-offset-1 col-lg-offset-1">
            <div class="introduction">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Sản phẩm...
                    </div>
                    <div class="panel-body">
                        <span class="label label-default">keyword</span> <span class="label ">keyword</span> <span class="label label-default">keyword</span> <span class="label ">keyword</span> <span class="label label-default">keyword</span> <span class="label ">keyword</span> <span class="label label-default">keyword</span> <span class="label ">keyword</span> <span class="label label-default">keyword</span> <span class="label ">keyword</span>
                        <span class="label label-default">keyword</span> <span class="label ">keyword</span> <span class="label label-default">keyword</span> <span class="label ">keyword</span> <span class="label label-default">keyword</span> <span class="label ">keyword</span> <span class="label label-default">keyword</span> <span class="label ">keyword</span> <span class="label label-default">keyword</span> <span class="label ">keyword</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class = "divider"></section>
    <footer>
        <div class="container-fluid" style="background-color:rgba(0,0,0,.65)">
            <div class=" footer row cover " style="padding-top: 20px; padding-bottom: 40px; ">
                <div class="col-md-10 col-md-offset-1" >
                    <div class="col-md-4" style='text-align: center; margin-top: 30px'>
                        <span style="font-size: 24px; color:white" id = "footerName"></span>
                        <p></p>
                        <img id = "footerAvatar" style="width: 40%; margin-top: 30px">
                        <p></p>
                        <app-slogan id = "slogan"></app-slogan>
                    </div>
                    <div class="col-md-4" style="margin-top: 30px">
                        <span style="font-size: 24px; color:white; text-align: center "><i class="fa fa-arrows"></i>   THÔNG TIN...</span>
                        <p></p>
                        <li>Sản phẩm mới</li>
                        <li>Sản phẩm bán chạy nhất</li>
                        <li>Chúng tôi</li>
                        <li>Tin khuyến mại</li>
                        <li>Chính sách</li>
                    </div>
                    <div class="col-md-4" style="margin-top: 30px">
                        <span style="font-size: 24px; color:white; text-align: center "><i class="fa fa-user-plus"></i>  SẢN PHẨM...</span>
                        <P></P>
                        <li>keyword abc</li>
                        <li>keyword abc</li>
                        <li>keyword abc</li>
                        <li>keyword abc</li>
                        <li>keyword abc</li>
                    </div>
                </div>
            </div>
            <!--/col-->
        </div>
        <div style=" width: 100%; background-color: rgba(0,0,0,.85); height: 90px;">
            @Copyright:abcd@abc.jsc
        </div>
    </footer>
    <template id = "similarElems" > 
        <div class=" col-md-2 col-lg-2">
            <item-detail>
            <div class="photo">
            <img app-role = "imageHolder" class="img-responsive center-block">
                <div class='focus' app-role = "handler"></div>
            </div>
            <div class="rating">
                <span>☆</span>
                <span>☆</span>
                <span>☆</span>
                <span>☆</span>
                <span>☆</span>
            </div>
            <div></div>
            <div product-title class='description' >
                <app-product-title></app-product-title>
            </div>
            <div product-price>Price: <app-product-price></app-product-price></div>
        </item-detail>
    </div>
    </template>
    <!-- Bottom of Page -->
    <div id="phasebeam">
        <canvas width="700" height="650"></canvas>
        <canvas width="700" height="650"></canvas>
        <canvas width="700" height="650"></canvas>
    </div>
    <script type="text/javascript" src="../public/js/phasebeam.js"></script>
    <script type="text/javascript" src="../public/js/utils.js"></script>
    <script type="text/javascript">
    var RSAPublicKey = <%-JSON.stringify(data)%>    
    var item =  <%-JSON.stringify(item)%>
    var shop =  <%-JSON.stringify(shop)%>
    var similarItems = <%-JSON.stringify(similarItems)%>
    $(function() {
            $('#nav').affix({
                offset: {
                    top: function() {
                        // Do other stuff here-- chipl
                        return $('#start-offset').offset().top / 2;
                    }
                }
            });
        })
    $(document).ready(function() {        
        var imgs = item.imgName;
        document.getElementById('DisplayImg').setAttribute('src','/public/products/'+imgs[0]+'.png');
        document.getElementById('img_0').setAttribute('src','/public/products/'+imgs[0]+'.png');
        document.getElementById('img_1').setAttribute('src','/public/products/'+imgs[1]+'.png');
        document.getElementById('img_2').setAttribute('src','/public/products/'+imgs[2]+'.png');
        var complementImages = document.querySelectorAll('[app-role = "complementImage"]')
        for(var i = 0;i< complementImages.length;i ++){
            complementImages[i].addEventListener("click",function(e){
                document.getElementById('DisplayImg').setAttribute('src',this.getAttribute('src'));
            },false)
        }        
        document.querySelector("app-productName").innerHTML = item.productName;
        document.querySelector("app-brandName").innerHTML = item.brandName;
        document.querySelector("app-country").innerHTML = item.country_ofOrigin;
        document.querySelector("app-ProductId").innerHTML = item._productId;
        document.querySelector("app-productDescription").innerHTML = item.productDescription;
        document.querySelector("app-Tags").innerHTML = item.categories.toString();        
        
        document.querySelector("app-oldPrice").innerHTML = item.oldPrice + "/" + item.unit;
        document.querySelector("app-newPrice").innerHTML = item.newPrice + "/" + item.unit;
        console.log(shop);
        document.querySelector("app-showName").innerHTML = shop.showName;
        document.getElementById("_avatar").setAttribute("src", shop.avatars.substring(1));
        document.getElementById("footerName").innerHTML = shop.showName;
        document.getElementById("slogan").innerHTML = shop.slogan;
        document.getElementById("footerAvatar").setAttribute("src",shop.avatars.substring(1));

        var similarElems = document.getElementById('similarElems').content
        var similarPanel = document.getElementById('similarPanel');
        for(var i = 0 ; i< similarItems.length; i++){
            var imageHolder = similarElems.querySelector('[app-role = "imageHolder"]')
            imageHolder.setAttribute("src",'/public/products/'+similarItems[i].imgName[0]+".png");
            var description = similarElems.querySelector('app-product-title');
            description.innerHTML= similarItems[i].productDescription;
            var price = similarElems.querySelector('app-product-price');
            price.innerHTML = similarItems[i].newPrice + " / "+ similarItems[i].unit;
            var handler = similarElems.querySelector('[app-role = "handler"]');
            handler.setAttribute('app-itemNumber', similarItems[i]._productId)
            similarPanel.appendChild(document.importNode(similarElems,true));

        }
        var imgs = document.querySelectorAll('[app-role = "handler"]');    
        for(var i = 0; i<imgs.length;i++){        
            imgs[i].addEventListener('click',function(e){
            // console.log('okie',this.getAttribute('app-itemNumber'));
            // var sURL =  "/createNewShop" + '/' + 'addItem' +'/'+this.getAttribute('app-itemNumber');
            var sURL =  '/' + shop.pathName +'/'+this.getAttribute('app-itemNumber');            
            console.log ('sURL', sURL);
            window.location.href = sURL;
        },false);
        }
    });
        
    </script>
</body>

</html>
