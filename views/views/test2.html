<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="../public/js/html2canvas.js"></script>
</head>
<style type="text/css">
.table {
    border-bottom: 0px !important;
}

.table th,
.table td {
    border: 0px !important;
}

.fixed-table-container {
    border: 0px !important;
}
</style>

<body>
    <div class="container-fluid" id="start-offset">
        <div class="col-md-9" style="min-height: 100%;">
            <h3 style="color: #fff">
        		Quản lý đơn đặt hàng
        	</h3>
            <div id='orderManager'>
            </div>
        </div>
        <!-- Display template -->
        <div id="order" style="display:none">
            <div class='row' app-id='order'>
                <div class="panel panel-default">
                    <div style="border:1px solid #fff">
                        <img app-id='buyerAvatar' style="height:40px;width:auto"></img>
                        <span app-id="OrderPerson" style="padding: 10px"></span>
                    </div>
                    <div>
                        <table class="table table-bordered" style="color:#fff;background-color: rgba(0,0,0,.6)">
                            <thead style="background-color:rgba(255,255,255,0.1)">
                                <tr>
                                    <th class="col-md-2">Product</th>
                                    <th>Qty</th>
                                    <th>Price</th>
                                    <th>Order's Info</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody app-id="orderTable">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <template id="items" style="display:none">
            <tr>
                <td>
                    <img app-role="icon" style="height:50px;width:auto">
                    <label app-role="product"></label>
                    <br>
                    <!-- <label>Shop: </label>
    			<div app-role= "shop"></div> -->
                </td>
                <td app-role="quantity"></td>
                <td app-role="price"></td>
                <td app-role="info"></td>
                <td style="vertical-align: middle"><span app-role="status" class="center-block"></span></td>
            </tr>
        </template>>
    </div>
    <div>
        <button type="button" class="btn btn-success" id="Adding">Adding</button>
    </div>
</body>
<script type="text/javascript">
$(document).ready(function() {
    document.getElementById('Adding').addEventListener('click', function(e) {
        makeUpTemplate();

    }, false)
});

var arr

function makeUpTemplate() {
    var mockObj = '[{"facebookName":"Nemo de Nemo","avatarImg":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xfa1/v/t1.0-1/p50x50/560240_3811570667854_29414954_n.jpg?oh=a0c75f8b908ed4bc1fabfe3b014aea62&oe=56B15108&__gda__=1455881025_d3cb3b64ea713a94a3f8dbcb5d4b6bdb","time":"Sun Nov 08 2015 17:26:50 GMT+0700 (SE Asia Standard Time)","from":"1835134196","items":[{"status":"Waiting..","date":"Sun Nov 08 2015 17:26:50 GMT+0700 (SE Asia Standard Time)","qty":1,"orderInfo":{"orderAddress":"Hanoi","orderPhone":"098777888","orderPerson":"Phan Hoang Anh"},"_id":"562bd3c8e9523f7406dfd1e6","unit":"giờ","newPrice":"170","oldPrice":"210","categories":["gái","miền tây"],"productDescription":"Bé nhỏ, xinh xắn, ngoan ngoãn mới ở quê lên.","shop":"abcd","brandName":"Gái Cần Thơ","country_ofOrigin":"Miền Tây","productName":"Vợ bé","_productId":"562bd3c8e9523f7406dfd1e6","imgName":["562bd3c8e9523f7406dfd1e6.0","562bd3c8e9523f7406dfd1e6.1","562bd3c8e9523f7406dfd1e6.2"],"isHotProduct":"true","isNewproduct":"true"},{"status":"Waiting..","date":"Sun Nov 08 2015 17:26:50 GMT+0700 (SE Asia Standard Time)","qty":1,"orderInfo":{"orderAddress":"Hanoi","orderPhone":"098777888","orderPerson":"Phan Hoang Anh"},"_id":"562bd46de9523f7406dfd1e8","categories":["vợ","gái","đanh đá"],"unit":"giờ","newPrice":"234","productDescription":"Miền Bắc có gà Đồ Sơn (Hải Phòng), Nghi Tàm, Nghĩa Đô, Vân Hồ (Hà Nội). Miền Nam có gà Chợ Lách(Bến Tre), Cao Lãnh (Đồng Tháp), Châu Đốc (An Giang), Bà Điểm, Gà tre đá cựa một số bắt nguồn từ Hố Nai (Đồng Nai), Tân Biên (Biên Hòa)... Tuy nhiên ở miền Nam chủ yếu đá gà cựa. Đá gà cựa là một hình thức sát phạt, người ta thường mua cựa sắt tra vào chân gà hoặc chuốt cựa gà thật bén. Chơi gà cựa thiên về ăn thua, không chiêm ngưỡng được tài nghệ của gà. Ở miền Trung chơi đá gà đòn, thế và chỉ đá gà con (không đá gà kiến, gà pha, ga ri...).","brandName":"Gái Cần Thơ","country_ofOrigin":"Miền Tây","productName":"Vợ hai","shop":"abcd","_productId":"562bd46de9523f7406dfd1e8","imgName":["562bd46de9523f7406dfd1e8.0","562bd46de9523f7406dfd1e8.1","562bd46de9523f7406dfd1e8.2"],"isHotProduct":"true","isNewproduct":"true"},{"status":"Waiting..","date":"Sun Nov 08 2015 17:26:50 GMT+0700 (SE Asia Standard Time)","qty":1,"orderInfo":{"orderAddress":"Hanoi","orderPhone":"098777888","orderPerson":"Phan Hoang Anh"},"_id":"562bd528e9523f7406dfd1e9","unit":"giờ","newPrice":"123","oldPrice":"234","categories":["gái","xinh"],"productDescription":"Bé nhỏ, xinh xắn, vô cùng hay ghen","brandName":"Gái Cần Thơ","country_ofOrigin":"Miên Tây","shop":"abcd","productName":"Gái quê","_productId":"562bd528e9523f7406dfd1e9","imgName":["562bd528e9523f7406dfd1e9.0","562bd528e9523f7406dfd1e9.1","562bd528e9523f7406dfd1e9.2"],"isHotProduct":"true","isNewproduct":"true"}]},{"items":[{"isNewproduct":"true","isHotProduct":"true","imgName":["562bd609e9523f7406dfd1eb.0","562bd609e9523f7406dfd1eb.1","562bd609e9523f7406dfd1eb.2"],"_productId":"562bd609e9523f7406dfd1eb","shop":"abcd","productName":"Bồ nhí","country_ofOrigin":"Hà Nội","brandName":"Gái chanh chua","productDescription":"Vô cùng sang chảnh và hay khinh người","oldPrice":"234","newPrice":"543","unit":"giờ","categories":["sang","chảnh","kiêu"],"_id":"562bd609e9523f7406dfd1eb","orderInfo":{"orderPerson":"Phan Hoang Anh","orderPhone":"098777888","orderAddress":"Hanoi"},"qty":2,"date":"Mon Nov 09 2015 12:14:44 GMT+0700 (SE Asia Standard Time)","status":"Waiting.."},{"isNewproduct":"true","isHotProduct":"true","imgName":["562bd743e9523f7406dfd1ec.0","562bd743e9523f7406dfd1ec.1","562bd743e9523f7406dfd1ec.2"],"_productId":"562bd743e9523f7406dfd1ec","shop":"abcd","productName":"Bạn tình","country_ofOrigin":"Hà Nội","brandName":"Gái Hà Thành","productDescription":"Thích đi chơi, ăn uống đồ hiệu, trình độ tiêu tiền rất khá","categories":["chảnh","kiêu","xinh"],"oldPrice":"234","newPrice":"456","unit":"giờ","_id":"562bd743e9523f7406dfd1ec","orderInfo":{"orderPerson":"Phan Hoang Anh","orderPhone":"098777888","orderAddress":"Hanoi"},"qty":2,"date":"Mon Nov 09 2015 12:14:44 GMT+0700 (SE Asia Standard Time)","status":"Waiting.."},{"isNewproduct":"true","isHotProduct":"true","imgName":["562bd86be9523f7406dfd1ee.0","562bd86be9523f7406dfd1ee.1","562bd86be9523f7406dfd1ee.2"],"_productId":"562bd86be9523f7406dfd1ee","shop":"abcd","productName":"Người tình","country_ofOrigin":"Hà Nội","brandName":"Gái Hà Thành","productDescription":"Thích làm tình và đi du lịch, có khả năng cặp bồ với người nước ngoài. Tiếng Anh giao tiếp rất tốt","categories":["gái","xinh"],"oldPrice":"2345","newPrice":"23445","unit":"giờ","_id":"562bd86be9523f7406dfd1ee","orderInfo":{"orderPerson":"Phan Hoang Anh","orderPhone":"098777888","orderAddress":"Hanoi"},"qty":2,"date":"Mon Nov 09 2015 12:14:44 GMT+0700 (SE Asia Standard Time)","status":"Waiting.."}],"from":"1835134196","time":"Mon Nov 09 2015 12:14:44 GMT+0700 (SE Asia Standard Time)","avatarImg":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xfa1/v/t1.0-1/p50x50/560240_3811570667854_29414954_n.jpg?oh=a0c75f8b908ed4bc1fabfe3b014aea62&oe=56B15108&__gda__=1455881025_d3cb3b64ea713a94a3f8dbcb5d4b6bdb","facebookName":"Nemo de Nemo"}]'
    arr = JSON.parse(mockObj);
    
    console.log(arr);
    var root = document.getElementById('orderManager');	
    var _orderElem = document.getElementById("order");
    for (var i = 0; i < arr.length; i++) {
    	
    	var orderElem = _orderElem.cloneNode(true);
        var ava = orderElem.querySelector("[app-id='buyerAvatar']");
        ava.setAttribute('src', arr[i].avatarImg);
        var orderPerson = orderElem.querySelector('[app-id="OrderPerson"]');
        orderPerson.innerHTML = arr[i].facebookName;
        var items = arr[i].items
        var orderTableRoot = orderElem.querySelector('[app-id="orderTable"]');
        orderElem.style.display = 'block';
        // console.log(items.length, i);
        
        for (var j = 0 ; j < items.length; j ++){
        	var itemElem = document.getElementById('items').content;
            			// console.log(orderTableRoot);
            		// var itemElem = _itemElem.cloneNode(true);
            		console.log(itemElem, i);
            		var icon = itemElem.querySelector('[app-role = "icon"]');
            		icon.setAttribute('src','/public/products/'+items[j].imgName[0]+ ".png")
            		itemElem.querySelector('[app-role= "product"]').innerHTML = items[j].productName;
            		itemElem.querySelector('[app-role = "quantity"]').innerHTML = items[j].qty;	
            		itemElem.querySelector('[app-role = "price"]').innerHTML= items[j].newPrice + " VND/ " + items[j].unit;	
            		var str  = '';
            		str += "<label > " + "Người nhận: "+ "</label>" +items[j].orderInfo.orderPerson +"<br>"
            		str += "<label> " + "Phone: "+ "</label>" + items[j].orderInfo.orderPhone +"<br>"
            		str += "<label> " + "Địa chỉ: "+ "</label>" +items[j].orderInfo.orderAddress
            		itemElem.querySelector('[app-role = "info"]').innerHTML= str;	
            		orderTableRoot.appendChild(document.importNode(itemElem,true));
        }
        // console.log(orderTableRoot);
        // root.appendChild(document.importNode(orderElem,true));
        root.appendChild(orderElem);
    }
        
   };
</script>

</html>
